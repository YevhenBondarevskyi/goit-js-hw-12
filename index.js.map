{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, page = 1) {\n    const API_KEY = \"51053325-3e2bfd05922f90ae0c618f7f8\";\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: 15,\n    });\n    \n    const response = await axios(`https://pixabay.com/api/?${params}`)\n    return response.data;\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".load-btn\");\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionDelay: 250,\n    captionPosition: \"bottom\",\n    captionsData: \"alt\"\n})\n\nexport function createGallery(images) {\n    const markUp = images.map(item => `\n        <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n        <img\n        class=\"gallery-img\"\n        src=\"${item.webformatURL}\"\n        alt=\"${item.tags}\"\n        width=\"360\" />\n        </a>\n        <div class=\"descr\">\n       <p class=\"descr-label\">Likes <span class=\"descr-span\">${item.likes}</span></p>\n       <p class=\"descr-label\">Views <span class=\"descr-span\">${item.views}</span></p>\n       <p class=\"descr-label\">Comments <span class=\"descr-span\">${item.comments}</span></p>\n       <p class=\"descr-label\">Downloads <span class=\"descr-span\">${item.downloads}</span></p>\n       </div>\n        </li>\n        `).join(\"\");\n    \n        galleryList.insertAdjacentHTML(\"beforeend\", markUp);\n        lightbox.refresh();\n};\n\nexport function clearGallery() {\n    galleryList.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n    loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton(){\n    loadBtn.style.display = \"block\";\n}\n\nexport function hideLoadMoreButton() {\n    loadBtn.style.display = 'none';\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\n\nconst formEl = document.querySelector(\".form\");\nconst inputEl = document.querySelector(\"input\");\nconst loadBtn = document.querySelector(\".load-btn\");\n\nformEl.addEventListener(\"submit\", handleSubmit);\nloadBtn.addEventListener(\"click\", handleClick);\n\nhideLoadMoreButton();\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nlet totalPages;\nconst perPage = 15;\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n\n    const query = inputEl.value.toLowerCase().trim();\n    currentQuery = query;\n    currentPage = 1;\n\n    if (!query) {\n        iziToast.warning({\n            title:\"Info\",\n            message: \"Please, enter a searching word!\",\n            position:\"topRight\",\n        })\n        return;\n    };\n\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            });\n            return;\n        };\n\n        createGallery(data.hits);\n        inputEl.value = \"\";\n\n        totalPages = Math.ceil(data.totalHits / perPage);\n        if (currentPage < totalPages) {\n            showLoadMoreButton();\n        };\n\n    } catch (error) {\n\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please, try again!\",\n            position: \"topRight\",\n        });\n\n    } finally {\n        hideLoader()\n    };\n};\n\nasync function handleClick() {\n    currentPage += 1;\n    \n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        createGallery(data.hits);\n\n        if (currentPage >= totalPages) {\n            hideLoadMoreButton();\n\n            iziToast.info({\n                title: \"Info\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n\n        const imgCard = document.querySelector(\".gallery-item\");\n        const imgCardHeight = imgCard.getBoundingClientRect().height;\n\n        window.scrollBy({\n            top: imgCardHeight * 2,\n            behavior: \"smooth\",\n        });\n\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please, try again!\",\n            position: \"topRight\",\n        });\n    };\n};"],"names":["getImagesByQuery","query","page","API_KEY","params","axios","galleryList","loader","loadBtn","lightbox","SimpleLightbox","createGallery","images","markUp","item","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formEl","inputEl","handleSubmit","handleClick","currentPage","currentQuery","totalPages","perPage","event","iziToast","data","imgCardHeight"],"mappings":"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"}